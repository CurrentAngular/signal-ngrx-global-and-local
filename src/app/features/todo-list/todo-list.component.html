<div class="todo-list">
	<h2>Todo List (Local Store)</h2>

	<!-- Добавление todo -->
	<div class="add-todo">
		<input #titleInput type="text" placeholder="Enter todo title..."
			(keyup.enter)="addTodo(titleInput.value); titleInput.value = ''" />
		<button (click)="addTodo(titleInput.value); titleInput.value = ''">
			Add Todo
		</button>
	</div>

	<!-- Управление -->
	<div class="controls">
		<button (click)="todoStore.loadTodos()" [disabled]="todoStore.loading()">
			{{ todoStore.loading() ? 'Loading...' : 'Load Sample Todos' }}
		</button>

		<select [value]="todoStore.filter()" (change)="onFilterChange($event)">
			<option value="all">All</option>
			<option value="active">Active</option>
			<option value="completed">Completed</option>
		</select>

		<input type="text" placeholder="Search todos..." [value]="todoStore.searchQuery()"
			(input)="todoStore.setSearchQuery($event.target.value)" />
	</div>

	<!-- Статистика -->
	<div class="stats">
		<span>Total: {{ todoStore.stats().total }}</span>
		<span>Active: {{ todoStore.stats().active }}</span>
		<span>Completed: {{ todoStore.stats().completed }}</span>
	</div>

	<!-- Список todos -->
	<div class="todos">
		@for (todo of todoStore.filteredTodos(); track todo.id) {
		<div class="todo-item" [class.completed]="todo.completed">
			<input type="checkbox" [checked]="todo.completed" (change)="todoStore.toggleTodo(todo.id)" />
			<span class="todo-title">{{ todo.title }}</span>
			<button (click)="todoStore.removeTodo(todo.id)">Delete</button>
			<small>{{ todo.createdAt | date : 'short' }}</small>
		</div>
		} @empty {
		<p>No todos found</p>
		}
	</div>

	<div class="state">
		<h4>Local Todo State:</h4>
		<pre>{{ todoStore | json }}</pre>
	</div>
</div>